language: node_js
node_js:
  - node
install:
  - yarn install
  - wget https://releases.hashicorp.com/terraform/0.11.8/terraform_0.11.8_linux_amd64.zip
  - sudo unzip terraform_0.11.8_linux_amd64.zip -d /usr/local/bin
before_script:
  - openssl des3 -d -A -in encrypted/cf.enc -k "$SSL_PASSWORD" > src/config.json
script:
  - yarn test:cov
  - cd terraform
  - terraform init
  - terraform plan -out plan
after_success:
  - if [ "$TRAVIS_BRANCH" == "master" ] && [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo "terraform apply plan"; fi
env:
  global:
  - secure: kxIxGTG+sNIXlK/5fgc+O4lLX2JaKBtAfyjbaomTbxoAg7PxzTQ/gofPQI8wCBs+hMQwoldsWYRByzzuLUzyd9HU7eoWtU5NuxvkM3QXQNVIA65paaHJQuFW8UF701Wh3qUeTueFjs3TT+hzs41KR3gK5oH2QwAUCFrmoH6lB5X0GoZuQ/4qJCkDTMa8ed5GBhGvG5wZOJr/qIWW4hU6a4qfuWgQ9wXDnCn7gROwtaU2SWBkGAb/qjglumq5yitKh0Eoyo+k1eyNvMGnT5Y3c96I1PbNvaDJrMXPaOAEDiqQ8Sqeq3l8w/LwgxXucCYgFFURqIkshJcbMp/fHlhyWIm2sM9d7AnmCZEN3JUFShqEoC1Uqg0Cxiay0LCUxGCNcBpY2crfWGRE/8dJ9sw94QMqljSlOLxLtIjt5gzK4fnJj7ky+fIxFGELktJYdsTpwtCA7x054TUsmFrs1+yy0k5RoAsdlzRU8IKSKcvNe3rDCru0qYN0njHTUhHsHtPf7yfEb9WgcD6jnCg82aexcpJpSP7nDNEBs4NoX7+kCn3XEvdF8mgG/JqKZJ76LuhEzhIi4b/a2lJ+te1m/6L4NAV+MwtWjAH5iOlkWUH2gGei3XM2lygyPPCkHnK2jvrbAv4XaCBio96rs/cOeI2Xo4tn4CHLZE2QlQRvXx4HEac=
  - secure: mkzTlLk7eKmCd+0aGXJ2I6E8uSIgDKAQbySnC71djSF+/KpvWTKmnUR0c4h4otb/LWP1s/OJq+xC/qXNf45or24M55xbFikmbLhnv3BZys4J+zXU+WA2FURoYSU42+jW5C6ZpecILi9TJIn8B4DYdZHmebG7+iT2Mj0ZCeAdezJ9vZpdCZn7trUeHNaVs7VyDBZ23qkXO0nuXO7+xYPZT4JjsmkYdM0yEz7WZ48G0FTkNeHWZAG2cr66M5CUZeyyhCfhTW+sfVTjZGowXSgOliXIyI6Wjpgg4mAmR7A237ssJY2EMgoXFL3/wX10pyRTnTTRBPjI5R3MkCzLzwtVlaRqpYZ2vsrq48MWFucwbD8tfG2u+JS8J2ChIjFp39LbhxPhLaRpR3FWkc13dIdLzCvZJmAIdIVcYqYSBiu3DDbjRms3Zj2YsrAukxfAmugHMXTSXzlbMs2X/tKDM1EkxUDsffbnwB8zNUGcRjBy3wNVwYXDUG2a7vfEa7jb0weT8U8/SOUb0n/wU62HMvI+XFMsDn8eANT1UZgJUh7JQrNPyGNzx8YEp7XBRB+D83Rrjt//Lqg94R7LURos5BLsv5KD0zPv7BSfmd7usecgecjRZ7m0m3BYMMWKI3vNUuzCgpJ2k3VVwItFfYCVf+c2/LNLu6NVh+/vHi8K2cZ1GOY=
  - secure: PURNYUxvZeDiCQnnQFlLDT+wjCz6Nyb112pHHoD+jEzkOgwVKkfdtS2WF/6T0MdQgzT5Y1rWDY9HvFQAYzudeoZ53g+VDEbLyN2h0voGbcbgawhSlW23FMKNJECzltqofAd1ruk5s3Qy8HPOqApuydd/ZfCbShX4V7or5XzX2Mten2U+TfH30FIJZDPql9O5sT22DDg9ym63H2QDBrE/IcW2cih5apBaijTLaxZJaYYKF/WG2yEiHZ4HprTmm0eYRXz35cTUOGDuX+hhZ11uDeYrWkyoRX7r4G2OujJLBQpx9/UIY00Z63aXGC+YyjaAMxLCo2PN1dvk9BxvzA/+zZWeTSo8NkSwEOJXTfDRe8dgFgaBEO6LW8CIOFmHht8UjWffZ9hOUzZI4hCS9coNfpPKLK4vqVP/Gj6GuWPb2y+9KsPcxXZdQrzzVtuXvu2wSauowR9GwuGifMt0DY3jUya06xuibJfkylCW281djkq5R2il+E6CiNiCQnnmjAhG1JK2mRa59GKr8TU2eWc9rZbAKkcBzIP8ElIQWbITsuMDCxfYoQJ33Z95gF7vl6Z5KTCkYooMEs7p9BL2fPoka2dWi0+Z3FFsuJGCFP9qTVv4kbhfu5Lo8FiuuFoUh15E1FKMkDTLrEYiyh1cqTiat7OIvtp17PEMx87EGZRpOrg=
